# 🦋 Golden‑Ratio Toolkit *v3.0*

A **tiny, tree‑shakable TypeScript library** for building interfaces and design‑systems whose rhythm, spacing and typography all follow the golden ratio (φ ≈ 1 .618).

* **Zero‑dependency core** (ESM + CJS)
* **Cache‑backed math** for lightning‑fast runtime
* **High‑precision mode** for scientific or art‑gen work
* **Unit helpers, scales, responsive clamp**
* **Context‑aware tokens** that keep headings, body‑copy and gaps harmonious
* **First‑class React hooks**
* **Tailwind / CSS‑var generators**
* Complete **Vitest suite** and dual‑build via *tsup*

---

## Installation

```bash
npm i golden-ratio-toolkit   # or pnpm / yarn
```

The package ships as both **ESM** (`dist/index.js`) and **CommonJS** (`dist/index.cjs`); typings included.

---

## Quick start

```ts
import { rem, phiClamp, createSpacingScale } from 'golden-ratio-toolkit';

const h1     = rem(1, 2);          // → '2.618rem'
const fluid  = phiClamp(1);        // clamp(1rem, …, 1.618rem)

const space  = createSpacingScale(); 
// { '2': '0.405rem', '3': '0.654rem', … }
```

### React

```tsx
import { usePhi, usePhiSpacing, useContextScale } from 'golden-ratio-toolkit/hooks';

function Card() {
  const { rem }     = usePhi();              // 1rem × φⁿ
  const { spacing } = usePhiSpacing(1);      // spacing.xl, lg …
  const headings    = useContextScale({ h1: 3, h2: 2 });

  return (
    <article style={{ padding: spacing.lg }}>
      <h1 style={{ fontSize: headings.h1 }}>Title</h1>
      <p style={{ fontSize: rem(0) }}>Body copy</p>
    </article>
  );
}
```

### Tailwind

```js
// tailwind.config.js
const { createTailwindPlugin } = require('golden-ratio-toolkit');

module.exports = {
  plugins: [createTailwindPlugin()],
};
```

---

## API reference

| Category | Functions / constants |
|----------|-----------------------|
| **Math** | `PHI`, `PHI_SMALL`, `PHI_SQUARED`, `phi(power)`, `phiPrecise(power, digits)` |
| **Units** | `toUnit(unit, precision)`, **shortcuts** `rem`, `px`, `em`, `vw`, `vh`, `pct` |
| **Responsive** | `phiClamp(min, powerSpan, minW, maxW, unit, precision)` |
| **Scales** | `createSpacingScale(base?, precision?)`, `createTypoScale(base?, precision?)` |
| **Contextual** | `createContextScale(map, base?, unit?, precision?)`  |
|  | `getContextRatio(map, a, b)`, `getContextUnit(map, a, b, base?, unit?, precision?)` |
| **Hash helper** | `hashContext(map)` → stable key for React deps |
| **CSS / build** | `phiCSS(precision)`, `createTailwindPlugin()` |
| **Hooks** | `usePhi`, `usePhiSpacing`, `useContextScale`, `useContextUnit` |
| **Precision utilities** | `phiPrecise()` for 1‑15 significant digits |

---

## Contextual scales 🌻

Want to keep H1, H2 and body copy in perpetual harmony?

```ts
const ratioMap = { h1: 3, h2: 2, body: 0 };       // powers of φ
const tokens   = createContextScale(ratioMap);
// { h1: '4.236rem', h2: '2.618rem', body: '1rem' }

getContextUnit(ratioMap, 'h1', 'h2'); // '1.618rem'
```

Use `hashContext(ratioMap)` as React dependency key so your hooks don’t re‑compute.

---

## High‑precision mode 🔬

```ts
phiPrecise(1, 12);  // 1.61803398875  (12 significant digits)
```

Ideal for algorithmic art where rounding errors are visible.

---

## Bundling & tree‑shaking

The build is generated by **tsup**:

```
dist/
  golden-ratio.esm.js   (ESM, side‑effects free)
  golden-ratio.cjs.js   (CommonJS)
  golden-ratio.d.ts
```

`package.json` exports field is configured for Node & browsers; `"sideEffects": false` guarantees dead‑code‑elimination.

---

## Tests

Run the Vitest suite:

```bash
pnpm test
```

Coverage includes constants, cache hits, custom units, clamp edge‑cases, contextual maps and precision paths.

---

## License

MIT © 2025
